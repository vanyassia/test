<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Многофункциональный сайт</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-page: #f0f2f5;
      --bg-card: #ffffff;
      --accent: #0b93f6;
      --text-primary: #050505;
      --text-secondary: #555;
      --shadow: rgba(0,0,0,0.1);
      --font: 'Inter', sans-serif;
    }
    * { box-sizing: border-box; margin:0; padding:0; }
    body {
      font-family: var(--font);
      background: var(--bg-page);
      color: var(--text-primary);
      display: flex; flex-direction: column; min-height: 100vh;
    }
    header {
      background: var(--accent);
      color: #fff;
      padding: 0.5rem 1rem;
      box-shadow: 0 2px 4px var(--shadow);
      position: sticky; top:0; z-index: 100;
    }
    header nav {
      display: flex; flex-wrap: wrap; gap: 1rem;
    }
    header nav a {
      color: #fff; text-decoration: none; font-weight:500;
      padding: 0.5rem;
      border-radius: 0.25rem;
      transition: background .2s;
    }
    header nav a.active,
    header nav a:hover {
      background: rgba(255,255,255,0.2);
    }
    main {
      flex:1;
      padding: 1rem;
      max-width: 1200px;
      margin: auto;
      width: 100%;
    }
    .page {
      display: none;
      animation: fadeIn .3s ease;
    }
    .page.active {
      display: block;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .card {
      background: var(--bg-card);
      padding: 1rem;
      margin-bottom: 1.5rem;
      border-radius: 0.5rem;
      box-shadow: 0 2px 6px var(--shadow);
    }
    .card h2 {
      margin-bottom: 0.75rem;
      font-size: 1.25rem;
      color: var(--accent);
    }
    .card label {
      display: block;
      margin: 0.5rem 0 0.25rem;
      font-size: 0.9rem;
      color: var(--text-secondary);
    }
    .card input, .card select, .card textarea {
      width: 100%;
      padding: 0.5rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 0.25rem;
      outline: none;
      transition: border-color .2s;
    }
    .card input:focus, .card select:focus, .card textarea:focus {
      border-color: var(--accent);
    }
    .card button {
      margin-top: 0.75rem;
      padding: 0.6rem 1.2rem;
      font-size: 1rem;
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 0.25rem;
      cursor: pointer;
      transition: background .2s, transform .1s;
    }
    .card button:active {
      transform: scale(0.97);
    }
    .result {
      margin-top: 0.75rem;
      font-weight: 500;
    }
    table { border-collapse: collapse; width: 100%; }
    table td { padding: 4px; }
    table button {
      width: 36px; height: 36px;
      border: 1px solid #ccc;
      border-radius: 4px;
      background: #fafafa;
    }
  </style>
</head>
<body>

<header>
  <nav id="nav">
    <a href="#calc" class="active">Калькулятор</a>
    <a href="#battleship">Морской бой</a>
    <a href="#guess">Угадайка</a>
    <a href="#currency">Курс валют</a>
    <a href="#askai">Вопрос нейросети</a>
    <a href="#8ball">Магический шар</a>
    <a href="#coins">Монетки</a>
    <a href="#fib">Fibonacci</a>
    <a href="#guessmedia">Угадай медиа</a>
    <a href="#grammar">Грамматика</a>
    <a href="#base">Системы счисления</a>
    <a href="#spellcheck">Проверка слова</a>
    <!-- Остальные функции требуют бэкенд и не включены -->
  </nav>
</header>

<main>
  <!-- 1. Калькулятор -->
  <section id="calc" class="page active">
    <div class="card">
      <h2>Калькулятор</h2>
      <label for="calcExpr">Выражение</label>
      <input id="calcExpr" placeholder="Например: 2+3*4">
      <button onclick="doCalc()">Вычислить</button>
      <div id="calcRes" class="result"></div>
    </div>
  </section>

  <!-- 2. Морской бой -->
  <section id="battleship" class="page">
    <div class="card">
      <h2>Морской бой (5×5)</h2>
      <button onclick="startBS()">Новая игра</button>
      <div id="bsBoard" class="result"></div>
    </div>
  </section>

  <!-- 3. Угадайка -->
  <section id="guess" class="page">
    <div class="card">
      <h2>Угадай число</h2>
      <button onclick="startGuess()">Загадать число</button>
      <label for="guessNum">Ваш ответ</label>
      <input id="guessNum" type="number">
      <button onclick="checkGuess()">Проверить</button>
      <div id="guessRes" class="result"></div>
    </div>
  </section>

  <!-- 4. Курс валют -->
  <section id="currency" class="page">
    <div class="card">
      <h2>Курс валют</h2>
      <label for="curBase">Базовая валюта</label>
      <input id="curBase" placeholder="USD">
      <label for="curTarget">Целевая валюта</label>
      <input id="curTarget" placeholder="RUB">
      <button onclick="getCurrency()">Получить курс</button>
      <div id="curRes" class="result"></div>
    </div>
  </section>

  <!-- 6. Вопрос к нейросети -->
  <section id="askai" class="page">
    <div class="card">
      <h2>Вопрос нейросети (OpenAI)</h2>
      <label for="aiPrompt">Вопрос</label>
      <textarea id="aiPrompt" rows="3"></textarea>
      <button onclick="askAI()">Спросить</button>
      <div id="aiRes" class="result"></div>
    </div>
  </section>

  <!-- 7. Магический шар -->
  <section id="8ball" class="page">
    <div class="card">
      <h2>Магический шар</h2>
      <button onclick="magicBall()">Узнать ответ</button>
      <div id="ballRes" class="result"></div>
    </div>
  </section>

  <!-- 12. Монетки -->
  <section id="coins" class="page">
    <div class="card">
      <h2>Монетки</h2>
      <button onclick="showCoins()">Получить монетки за визит</button>
      <div id="coinsRes" class="result"></div>
    </div>
  </section>

  <!-- 13. Fibonacci -->
  <section id="fib" class="page">
    <div class="card">
      <h2>Число Фибоначчи</h2>
      <label for="fibN">n</label>
      <input id="fibN" type="number">
      <button onclick="doFib()">Вычислить Fib(n)</button>
      <div id="fibRes" class="result"></div>
    </div>
  </section>

  <!-- 14–15. Угадай медиа -->
  <section id="guessmedia" class="page">
    <div class="card">
      <h2>Угадай фильм или книгу</h2>
      <button onclick="guessFilm()">Загадать фильм</button>
      <button onclick="guessBook()">Загадать книгу</button>
      <div id="mediaRes" class="result"></div>
    </div>
  </section>

  <!-- 16. Грамматика -->
  <section id="grammar" class="page">
    <div class="card">
      <h2>Проверка грамматики</h2>
      <label for="grammarTxt">Текст</label>
      <textarea id="grammarTxt" rows="3"></textarea>
      <button onclick="checkGrammar()">Проверить</button>
      <div id="grammarRes" class="result"></div>
    </div>
  </section>

  <!-- 17. Системы счисления -->
  <section id="base" class="page">
    <div class="card">
      <h2>Калькулятор систем счисления</h2>
      <label for="baseNum">Число</label>
      <input id="baseNum">
      <label for="baseFrom">Из (основание)</label>
      <input id="baseFrom" type="number">
      <label for="baseTo">В (основание)</label>
      <input id="baseTo" type="number">
      <button onclick="convertBase()">Конвертировать</button>
      <div id="baseRes" class="result"></div>
    </div>
  </section>

  <!-- 20. Проверка слова -->
  <section id="spellcheck" class="page">
    <div class="card">
      <h2>Проверка слова</h2>
      <label for="spellWord">Слово</label>
      <input id="spellWord">
      <button onclick="spellCheck()">Проверить</button>
      <div id="spellRes" class="result"></div>
    </div>
  </section>

</main>

<!-- библиотеки -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js"></script>

<script>
  // навигация
  const navLinks = document.querySelectorAll('header nav a');
  navLinks.forEach(a=>{
    a.addEventListener('click', e=>{
      navLinks.forEach(x=>x.classList.remove('active'));
      e.target.classList.add('active');
      document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
      document.querySelector(e.target.getAttribute('href')).classList.add('active');
    });
  });

  // 1. Калькулятор
  function doCalc(){
    const expr = document.getElementById('calcExpr').value;
    try{
      const r = math.evaluate(expr);
      document.getElementById('calcRes').textContent = `${expr} = ${r}`;
    } catch(e){
      document.getElementById('calcRes').textContent = 'Ошибка: '+e.message;
    }
  }

  // 2. Морской бой
  let bsField, bsShips;
  function startBS(){
    bsField = Array.from({length:5},()=>Array(5).fill('O'));
    bsShips = new Set();
    while(bsShips.size<3) bsShips.add(`${rand(5)},${rand(5)}`);
    renderBS();
  }
  function renderBS(){
    const container = document.getElementById('bsBoard');
    let html = '<table>';
    bsField.forEach((row,i)=>{
      html += '<tr>';
      row.forEach((c,j)=>{
        html += `<td><button onclick="clickBS(${i},${j})">${c}</button></td>`;
      });
      html += '</tr>';
    });
    html += '</table>';
    container.innerHTML = html;
  }
  function clickBS(i,j){
    const key = `${i},${j}`;
    if(bsShips.has(key)){
      bsField[i][j] = '✖'; bsShips.delete(key);
    } else {
      bsField[i][j] = '−';
    }
    renderBS();
    if(bsShips.size===0){
      alert('Все корабли потоплены! 🎉');
    }
  }

  // 3. Угадайка
  let guessSecret;
  function startGuess(){
    guessSecret = rand(100)+1;
    document.getElementById('guessRes').textContent = 'Я загадал число. Угадайте!';
  }
  function checkGuess(){
    const num = +document.getElementById('guessNum').value;
    let msg = '';
    if(num < guessSecret) msg='Больше!';
    else if(num > guessSecret) msg='Меньше!';
    else msg='Угадали! 🎉';
    document.getElementById('guessRes').textContent = msg;
  }

  // 4. Курс валют
  async function getCurrency(){
    const base = document.getElementById('curBase').value.toUpperCase() || 'USD';
    const tgt  = document.getElementById('curTarget').value.toUpperCase() || 'RUB';
    try{
      const j = await (await fetch(`https://api.exchangerate.host/latest?base=${base}&symbols=${tgt}`)).json();
      if(j.success) document.getElementById('curRes').textContent = `1 ${base} = ${j.rates[tgt].toFixed(4)} ${tgt}`;
      else document.getElementById('curRes').textContent = 'Ошибка API';
    } catch {
      document.getElementById('curRes').textContent = 'Сетевая ошибка';
    }
  }

  // 6. Вопрос нейросети
  async function askAI(){
    const prompt = document.getElementById('aiPrompt').value;
    const key = ''; // вставьте ваш OPENAI_API_KEY
    if(!key) return document.getElementById('aiRes').textContent = 'Укажите API‑ключ';
    try{
      const res = await fetch('https://api.openai.com/v1/chat/completions',{
        method:'POST',
        headers:{'Content-Type':'application/json','Authorization':'Bearer '+key},
        body: JSON.stringify({model:'gpt-3.5-turbo',messages:[{role:'user',content:prompt}]})
      });
      const j = await res.json();
      document.getElementById('aiRes').textContent = j.choices[0].message.content;
    } catch(e){
      document.getElementById('aiRes').textContent = 'Ошибка OpenAI';
    }
  }

  // 7. Магический шар
  const BALL = ["Да","Нет","Возможно","Спроси позже","Определённо да","Вряд ли"];
  function magicBall(){
    document.getElementById('ballRes').textContent = BALL[rand(BALL.length)];
  }

  // 12. Монетки
  function showCoins(){
    let c = +localStorage.getItem('coins') || 0;
    const d = rand(10);
    c += d;
    localStorage.setItem('coins', c);
    document.getElementById('coinsRes').textContent = `У вас ${c} монеток (+${d})`;
  }

  // 13. Fib
  function doFib(){
    const n = +document.getElementById('fibN').value;
    let a=0,b=1;
    for(let i=0;i<n;i++) [a,b]=[b,a+b];
    document.getElementById('fibRes').textContent = `Fib(${n}) = ${a}`;
  }

  // 14–15. Угадай медиа
  const FILMS=["Матрица","Интерстеллар","Начало","Криминальное чтиво"];
  const BOOKS=["Война и мир","Преступление и наказанию","Мастер и Маргарита"];
  function guessFilm(){
    document.getElementById('mediaRes').textContent = `Фильм: ${FILMS[rand(FILMS.length)]}`;
  }
  function guessBook(){
    document.getElementById('mediaRes').textContent = `Книга: ${BOOKS[rand(BOOKS.length)]}`;
  }

  // 16. Грамматика
  async function checkGrammar(){
    const txt = document.getElementById('grammarTxt').value;
    try{
      const p = new URLSearchParams({text: txt, language: 'ru'});
      const j = await (await fetch('https://api.languagetool.org/v2/check',{method:'POST',body:p})).json();
      if(!j.matches.length) document.getElementById('grammarRes').textContent = 'Ошибок не найдено';
      else document.getElementById('grammarRes').innerHTML = j.matches.slice(0,3).map(m=>m.message).join('<br>');
    } catch {
      document.getElementById('grammarRes').textContent = 'Ошибка grammar';
    }
  }

  // 17. Системы счисления
  function convertBase(){
    const num = document.getElementById('baseNum').value;
    const f = +document.getElementById('baseFrom').value;
    const t = +document.getElementById('baseTo').value;
    try{
      const dec = parseInt(num, f);
      const out = dec.toString(t).toUpperCase();
      document.getElementById('baseRes').textContent = `${num}(base${f}) → ${out}(base${t})`;
    } catch(e){
      document.getElementById('baseRes').textContent = 'Ошибка';
    }
  }

  // 20. Spellcheck
  async function spellCheck(){
    const w = document.getElementById('spellWord').value;
    try{
      const p = new URLSearchParams({text: w, language: 'ru'});
      const j = await (await fetch('https://api.languagetool.org/v2/check',{method:'POST',body:p})).json();
      if(!j.matches.length) document.getElementById('spellRes').textContent = 'Ошибок нет';
      else {
        const reps = j.matches[0].replacements.map(r=>r.value).slice(0,5);
        document.getElementById('spellRes').textContent = 'Возможно: ' + reps.join(', ');
      }
    } catch {
      document.getElementById('spellRes').textContent = 'Ошибка spellcheck';
    }
  }

  // утилиты
  function rand(n){ return Math.floor(Math.random()*n); }
</script>

</body>
</html>
