<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–∞–π—Ç</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-page: #f0f2f5;
      --bg-card: #ffffff;
      --accent: #0b93f6;
      --text-primary: #050505;
      --text-secondary: #555;
      --shadow: rgba(0,0,0,0.1);
      --font: 'Inter', sans-serif;
    }
    * { box-sizing: border-box; margin:0; padding:0; }
    body {
      font-family: var(--font);
      background: var(--bg-page);
      color: var(--text-primary);
      display: flex; flex-direction: column; min-height: 100vh;
    }
    header {
      background: var(--accent);
      color: #fff;
      padding: 0.5rem 1rem;
      box-shadow: 0 2px 4px var(--shadow);
      position: sticky; top:0; z-index: 100;
    }
    header nav {
      display: flex; flex-wrap: wrap; gap: 1rem;
    }
    header nav a {
      color: #fff; text-decoration: none; font-weight:500;
      padding: 0.5rem;
      border-radius: 0.25rem;
      transition: background .2s;
    }
    header nav a.active,
    header nav a:hover {
      background: rgba(255,255,255,0.2);
    }
    main {
      flex:1;
      padding: 1rem;
      max-width: 1200px;
      margin: auto;
      width: 100%;
    }
    .page {
      display: none;
      animation: fadeIn .3s ease;
    }
    .page.active {
      display: block;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .card {
      background: var(--bg-card);
      padding: 1rem;
      margin-bottom: 1.5rem;
      border-radius: 0.5rem;
      box-shadow: 0 2px 6px var(--shadow);
    }
    .card h2 {
      margin-bottom: 0.75rem;
      font-size: 1.25rem;
      color: var(--accent);
    }
    .card label {
      display: block;
      margin: 0.5rem 0 0.25rem;
      font-size: 0.9rem;
      color: var(--text-secondary);
    }
    .card input, .card select, .card textarea {
      width: 100%;
      padding: 0.5rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 0.25rem;
      outline: none;
      transition: border-color .2s;
    }
    .card input:focus, .card select:focus, .card textarea:focus {
      border-color: var(--accent);
    }
    .card button {
      margin-top: 0.75rem;
      padding: 0.6rem 1.2rem;
      font-size: 1rem;
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 0.25rem;
      cursor: pointer;
      transition: background .2s, transform .1s;
    }
    .card button:active {
      transform: scale(0.97);
    }
    .result {
      margin-top: 0.75rem;
      font-weight: 500;
    }
    table { border-collapse: collapse; width: 100%; }
    table td { padding: 4px; }
    table button {
      width: 36px; height: 36px;
      border: 1px solid #ccc;
      border-radius: 4px;
      background: #fafafa;
    }
  </style>
</head>
<body>

<header>
  <nav id="nav">
    <a href="#calc" class="active">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</a>
    <a href="#battleship">–ú–æ—Ä—Å–∫–æ–π¬†–±–æ–π</a>
    <a href="#guess">–£–≥–∞–¥–∞–π–∫–∞</a>
    <a href="#currency">–ö—É—Ä—Å¬†–≤–∞–ª—é—Ç</a>
    <a href="#askai">–í–æ–ø—Ä–æ—Å¬†–Ω–µ–π—Ä–æ—Å–µ—Ç–∏</a>
    <a href="#8ball">–ú–∞–≥–∏—á–µ—Å–∫–∏–π¬†—à–∞—Ä</a>
    <a href="#coins">–ú–æ–Ω–µ—Ç–∫–∏</a>
    <a href="#fib">Fibonacci</a>
    <a href="#guessmedia">–£–≥–∞–¥–∞–π¬†–º–µ–¥–∏–∞</a>
    <a href="#grammar">–ì—Ä–∞–º–º–∞—Ç–∏–∫–∞</a>
    <a href="#base">–°–∏—Å—Ç–µ–º—ã¬†—Å—á–∏—Å–ª–µ–Ω–∏—è</a>
    <a href="#spellcheck">–ü—Ä–æ–≤–µ—Ä–∫–∞¬†—Å–ª–æ–≤–∞</a>
    <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç –±—ç–∫–µ–Ω–¥ –∏ –Ω–µ –≤–∫–ª—é—á–µ–Ω—ã -->
  </nav>
</header>

<main>
  <!-- 1. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä -->
  <section id="calc" class="page active">
    <div class="card">
      <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h2>
      <label for="calcExpr">–í—ã—Ä–∞–∂–µ–Ω–∏–µ</label>
      <input id="calcExpr" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 2+3*4">
      <button onclick="doCalc()">–í—ã—á–∏—Å–ª–∏—Ç—å</button>
      <div id="calcRes" class="result"></div>
    </div>
  </section>

  <!-- 2. –ú–æ—Ä—Å–∫–æ–π –±–æ–π -->
  <section id="battleship" class="page">
    <div class="card">
      <h2>–ú–æ—Ä—Å–∫–æ–π –±–æ–π (5√ó5)</h2>
      <button onclick="startBS()">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
      <div id="bsBoard" class="result"></div>
    </div>
  </section>

  <!-- 3. –£–≥–∞–¥–∞–π–∫–∞ -->
  <section id="guess" class="page">
    <div class="card">
      <h2>–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ</h2>
      <button onclick="startGuess()">–ó–∞–≥–∞–¥–∞—Ç—å —á–∏—Å–ª–æ</button>
      <label for="guessNum">–í–∞—à –æ—Ç–≤–µ—Ç</label>
      <input id="guessNum" type="number">
      <button onclick="checkGuess()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <div id="guessRes" class="result"></div>
    </div>
  </section>

  <!-- 4. –ö—É—Ä—Å –≤–∞–ª—é—Ç -->
  <section id="currency" class="page">
    <div class="card">
      <h2>–ö—É—Ä—Å –≤–∞–ª—é—Ç</h2>
      <label for="curBase">–ë–∞–∑–æ–≤–∞—è –≤–∞–ª—é—Ç–∞</label>
      <input id="curBase" placeholder="USD">
      <label for="curTarget">–¶–µ–ª–µ–≤–∞—è –≤–∞–ª—é—Ç–∞</label>
      <input id="curTarget" placeholder="RUB">
      <button onclick="getCurrency()">–ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å</button>
      <div id="curRes" class="result"></div>
    </div>
  </section>

  <!-- 6. –í–æ–ø—Ä–æ—Å –∫ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ -->
  <section id="askai" class="page">
    <div class="card">
      <h2>–í–æ–ø—Ä–æ—Å –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ (OpenAI)</h2>
      <label for="aiPrompt">–í–æ–ø—Ä–æ—Å</label>
      <textarea id="aiPrompt" rows="3"></textarea>
      <button onclick="askAI()">–°–ø—Ä–æ—Å–∏—Ç—å</button>
      <div id="aiRes" class="result"></div>
    </div>
  </section>

  <!-- 7. –ú–∞–≥–∏—á–µ—Å–∫–∏–π —à–∞—Ä -->
  <section id="8ball" class="page">
    <div class="card">
      <h2>–ú–∞–≥–∏—á–µ—Å–∫–∏–π —à–∞—Ä</h2>
      <button onclick="magicBall()">–£–∑–Ω–∞—Ç—å –æ—Ç–≤–µ—Ç</button>
      <div id="ballRes" class="result"></div>
    </div>
  </section>

  <!-- 12. –ú–æ–Ω–µ—Ç–∫–∏ -->
  <section id="coins" class="page">
    <div class="card">
      <h2>–ú–æ–Ω–µ—Ç–∫–∏</h2>
      <button onclick="showCoins()">–ü–æ–ª—É—á–∏—Ç—å –º–æ–Ω–µ—Ç–∫–∏ –∑–∞ –≤–∏–∑–∏—Ç</button>
      <div id="coinsRes" class="result"></div>
    </div>
  </section>

  <!-- 13. Fibonacci -->
  <section id="fib" class="page">
    <div class="card">
      <h2>–ß–∏—Å–ª–æ –§–∏–±–æ–Ω–∞—á—á–∏</h2>
      <label for="fibN">n</label>
      <input id="fibN" type="number">
      <button onclick="doFib()">–í—ã—á–∏—Å–ª–∏—Ç—å Fib(n)</button>
      <div id="fibRes" class="result"></div>
    </div>
  </section>

  <!-- 14‚Äì15. –£–≥–∞–¥–∞–π –º–µ–¥–∏–∞ -->
  <section id="guessmedia" class="page">
    <div class="card">
      <h2>–£–≥–∞–¥–∞–π —Ñ–∏–ª—å–º –∏–ª–∏ –∫–Ω–∏–≥—É</h2>
      <button onclick="guessFilm()">–ó–∞–≥–∞–¥–∞—Ç—å —Ñ–∏–ª—å–º</button>
      <button onclick="guessBook()">–ó–∞–≥–∞–¥–∞—Ç—å –∫–Ω–∏–≥—É</button>
      <div id="mediaRes" class="result"></div>
    </div>
  </section>

  <!-- 16. –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ -->
  <section id="grammar" class="page">
    <div class="card">
      <h2>–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏</h2>
      <label for="grammarTxt">–¢–µ–∫—Å—Ç</label>
      <textarea id="grammarTxt" rows="3"></textarea>
      <button onclick="checkGrammar()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <div id="grammarRes" class="result"></div>
    </div>
  </section>

  <!-- 17. –°–∏—Å—Ç–µ–º—ã —Å—á–∏—Å–ª–µ–Ω–∏—è -->
  <section id="base" class="page">
    <div class="card">
      <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–∏—Å—Ç–µ–º —Å—á–∏—Å–ª–µ–Ω–∏—è</h2>
      <label for="baseNum">–ß–∏—Å–ª–æ</label>
      <input id="baseNum">
      <label for="baseFrom">–ò–∑ (–æ—Å–Ω–æ–≤–∞–Ω–∏–µ)</label>
      <input id="baseFrom" type="number">
      <label for="baseTo">–í (–æ—Å–Ω–æ–≤–∞–Ω–∏–µ)</label>
      <input id="baseTo" type="number">
      <button onclick="convertBase()">–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
      <div id="baseRes" class="result"></div>
    </div>
  </section>

  <!-- 20. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–≤–∞ -->
  <section id="spellcheck" class="page">
    <div class="card">
      <h2>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–≤–∞</h2>
      <label for="spellWord">–°–ª–æ–≤–æ</label>
      <input id="spellWord">
      <button onclick="spellCheck()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <div id="spellRes" class="result"></div>
    </div>
  </section>

</main>

<!-- –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js"></script>

<script>
  // –Ω–∞–≤–∏–≥–∞—Ü–∏—è
  const navLinks = document.querySelectorAll('header nav a');
  navLinks.forEach(a=>{
    a.addEventListener('click', e=>{
      navLinks.forEach(x=>x.classList.remove('active'));
      e.target.classList.add('active');
      document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
      document.querySelector(e.target.getAttribute('href')).classList.add('active');
    });
  });

  // 1. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
  function doCalc(){
    const expr = document.getElementById('calcExpr').value;
    try{
      const r = math.evaluate(expr);
      document.getElementById('calcRes').textContent = `${expr} = ${r}`;
    } catch(e){
      document.getElementById('calcRes').textContent = '–û—à–∏–±–∫–∞: '+e.message;
    }
  }

  // 2. –ú–æ—Ä—Å–∫–æ–π –±–æ–π
  let bsField, bsShips;
  function startBS(){
    bsField = Array.from({length:5},()=>Array(5).fill('O'));
    bsShips = new Set();
    while(bsShips.size<3) bsShips.add(`${rand(5)},${rand(5)}`);
    renderBS();
  }
  function renderBS(){
    const container = document.getElementById('bsBoard');
    let html = '<table>';
    bsField.forEach((row,i)=>{
      html += '<tr>';
      row.forEach((c,j)=>{
        html += `<td><button onclick="clickBS(${i},${j})">${c}</button></td>`;
      });
      html += '</tr>';
    });
    html += '</table>';
    container.innerHTML = html;
  }
  function clickBS(i,j){
    const key = `${i},${j}`;
    if(bsShips.has(key)){
      bsField[i][j] = '‚úñ'; bsShips.delete(key);
    } else {
      bsField[i][j] = '‚àí';
    }
    renderBS();
    if(bsShips.size===0){
      alert('–í—Å–µ –∫–æ—Ä–∞–±–ª–∏ –ø–æ—Ç–æ–ø–ª–µ–Ω—ã! üéâ');
    }
  }

  // 3. –£–≥–∞–¥–∞–π–∫–∞
  let guessSecret;
  function startGuess(){
    guessSecret = rand(100)+1;
    document.getElementById('guessRes').textContent = '–Ø –∑–∞–≥–∞–¥–∞–ª —á–∏—Å–ª–æ. –£–≥–∞–¥–∞–π—Ç–µ!';
  }
  function checkGuess(){
    const num = +document.getElementById('guessNum').value;
    let msg = '';
    if(num < guessSecret) msg='–ë–æ–ª—å—à–µ!';
    else if(num > guessSecret) msg='–ú–µ–Ω—å—à–µ!';
    else msg='–£–≥–∞–¥–∞–ª–∏! üéâ';
    document.getElementById('guessRes').textContent = msg;
  }

  // 4. –ö—É—Ä—Å –≤–∞–ª—é—Ç
  async function getCurrency(){
    const base = document.getElementById('curBase').value.toUpperCase() || 'USD';
    const tgt  = document.getElementById('curTarget').value.toUpperCase() || 'RUB';
    try{
      const j = await (await fetch(`https://api.exchangerate.host/latest?base=${base}&symbols=${tgt}`)).json();
      if(j.success) document.getElementById('curRes').textContent = `1 ${base} = ${j.rates[tgt].toFixed(4)} ${tgt}`;
      else document.getElementById('curRes').textContent = '–û—à–∏–±–∫–∞ API';
    } catch {
      document.getElementById('curRes').textContent = '–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞';
    }
  }

  // 6. –í–æ–ø—Ä–æ—Å –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
  async function askAI(){
    const prompt = document.getElementById('aiPrompt').value;
    const key = ''; // –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à OPENAI_API_KEY
    if(!key) return document.getElementById('aiRes').textContent = '–£–∫–∞–∂–∏—Ç–µ API‚Äë–∫–ª—é—á';
    try{
      const res = await fetch('https://api.openai.com/v1/chat/completions',{
        method:'POST',
        headers:{'Content-Type':'application/json','Authorization':'Bearer '+key},
        body: JSON.stringify({model:'gpt-3.5-turbo',messages:[{role:'user',content:prompt}]})
      });
      const j = await res.json();
      document.getElementById('aiRes').textContent = j.choices[0].message.content;
    } catch(e){
      document.getElementById('aiRes').textContent = '–û—à–∏–±–∫–∞ OpenAI';
    }
  }

  // 7. –ú–∞–≥–∏—á–µ—Å–∫–∏–π —à–∞—Ä
  const BALL = ["–î–∞","–ù–µ—Ç","–í–æ–∑–º–æ–∂–Ω–æ","–°–ø—Ä–æ—Å–∏ –ø–æ–∑–∂–µ","–û–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ –¥–∞","–í—Ä—è–¥ –ª–∏"];
  function magicBall(){
    document.getElementById('ballRes').textContent = BALL[rand(BALL.length)];
  }

  // 12. –ú–æ–Ω–µ—Ç–∫–∏
  function showCoins(){
    let c = +localStorage.getItem('coins') || 0;
    const d = rand(10);
    c += d;
    localStorage.setItem('coins', c);
    document.getElementById('coinsRes').textContent = `–£ –≤–∞—Å ${c} –º–æ–Ω–µ—Ç–æ–∫ (+${d})`;
  }

  // 13. Fib
  function doFib(){
    const n = +document.getElementById('fibN').value;
    let a=0,b=1;
    for(let i=0;i<n;i++) [a,b]=[b,a+b];
    document.getElementById('fibRes').textContent = `Fib(${n}) = ${a}`;
  }

  // 14‚Äì15. –£–≥–∞–¥–∞–π –º–µ–¥–∏–∞
  const FILMS=["–ú–∞—Ç—Ä–∏—Ü–∞","–ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä","–ù–∞—á–∞–ª–æ","–ö—Ä–∏–º–∏–Ω–∞–ª—å–Ω–æ–µ —á—Ç–∏–≤–æ"];
  const BOOKS=["–í–æ–π–Ω–∞ –∏ –º–∏—Ä","–ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏ –Ω–∞–∫–∞–∑–∞–Ω–∏—é","–ú–∞—Å—Ç–µ—Ä –∏ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞"];
  function guessFilm(){
    document.getElementById('mediaRes').textContent = `–§–∏–ª—å–º: ${FILMS[rand(FILMS.length)]}`;
  }
  function guessBook(){
    document.getElementById('mediaRes').textContent = `–ö–Ω–∏–≥–∞: ${BOOKS[rand(BOOKS.length)]}`;
  }

  // 16. –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞
  async function checkGrammar(){
    const txt = document.getElementById('grammarTxt').value;
    try{
      const p = new URLSearchParams({text: txt, language: 'ru'});
      const j = await (await fetch('https://api.languagetool.org/v2/check',{method:'POST',body:p})).json();
      if(!j.matches.length) document.getElementById('grammarRes').textContent = '–û—à–∏–±–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ';
      else document.getElementById('grammarRes').innerHTML = j.matches.slice(0,3).map(m=>m.message).join('<br>');
    } catch {
      document.getElementById('grammarRes').textContent = '–û—à–∏–±–∫–∞ grammar';
    }
  }

  // 17. –°–∏—Å—Ç–µ–º—ã —Å—á–∏—Å–ª–µ–Ω–∏—è
  function convertBase(){
    const num = document.getElementById('baseNum').value;
    const f = +document.getElementById('baseFrom').value;
    const t = +document.getElementById('baseTo').value;
    try{
      const dec = parseInt(num, f);
      const out = dec.toString(t).toUpperCase();
      document.getElementById('baseRes').textContent = `${num}(base${f}) ‚Üí ${out}(base${t})`;
    } catch(e){
      document.getElementById('baseRes').textContent = '–û—à–∏–±–∫–∞';
    }
  }

  // 20. Spellcheck
  async function spellCheck(){
    const w = document.getElementById('spellWord').value;
    try{
      const p = new URLSearchParams({text: w, language: 'ru'});
      const j = await (await fetch('https://api.languagetool.org/v2/check',{method:'POST',body:p})).json();
      if(!j.matches.length) document.getElementById('spellRes').textContent = '–û—à–∏–±–æ–∫ –Ω–µ—Ç';
      else {
        const reps = j.matches[0].replacements.map(r=>r.value).slice(0,5);
        document.getElementById('spellRes').textContent = '–í–æ–∑–º–æ–∂–Ω–æ: ' + reps.join(', ');
      }
    } catch {
      document.getElementById('spellRes').textContent = '–û—à–∏–±–∫–∞ spellcheck';
    }
  }

  // —É—Ç–∏–ª–∏—Ç—ã
  function rand(n){ return Math.floor(Math.random()*n); }
</script>

</body>
</html>
